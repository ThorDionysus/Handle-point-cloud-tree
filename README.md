# 点云树木分割以及树木表型读取程序
## 点云分割程序
本程序使用的是k聚类分割方法。在代码中，将待分割点云路径以及存储路径修正为自己所需要的文件夹，而后修改代码中的n_cluster值以确定聚类的树木。
本次聚类按照点云的RGB颜色进行分割，从而可以对点云树木进行分割，以达到对树木各器官的区分，并且能够起到去噪作用，从而处理在风速较大的环境下采样的含有大量噪声点的点云图。
对高度2米以内的小型树木，n_cluster的值在60左右较为合适，而对于高度10米的树木，n_cluster的值在200左右能够保证精度。使用者可以根据效果来自行调整n_cluster的值。
分割的各结果已经根据聚类簇的颜色进行过排序，可以进而利用Meshlab等软件对点云进行筛选，再使用点云合并程序将相同器官的点云进行再合并，合并时要将需要合并的点云文件路径添加到列表里，并且修改合并后点云的路径。
注意，执行该代码需要安装open3D库。

## 基本表型读取
表型读取程序处理的是未经过分割的点云，其能够读取点云较为基本的参数，包络株高、树木投影面积、树冠直径的最大值、树木体积以及树木表面积。
在程序当中，其自带了半径滤波功能，以去除孤立噪声点的影响。其中要设定nb_points和radius的值，nb_points设置在20左右，而radius设置在0.04左右较为合理。但也应当依据树木的点云密度，合理设置该参数值。

## 枝下高的读取
由于没有使用机器学习以及深度学习方法，其无法自动识别树枝和分叉形状，于是便编写了一个利用穷举的算法。其需要设置n的值（n为参与绘制点的个数），算法会按照z值从低到高对点云当中的点进行排序，而后绘制前n个点在xOy截面的投影。
对投影的形状和尺寸进行观察，若其仍然属于树枝部分则手动小部分增加n值，若其溢出则停止增加，通过合理调节该参数来读取树木的枝下高。
注意，对尺寸以及点云密度不同的树木，n值的大小差异较大。其大约是以千为单位，。在寻找n值时可以使用二分法，从而加快查找效率。
